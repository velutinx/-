<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>VELUTINX â€” Commissions</title>
  <link rel="stylesheet" href="/assets/css/styles.css">
</head>
<body>

  <!-- Fixed controls -->
  <div class="lang-swipe" id="langSwipe"></div>
  <div class="lang-toggle" id="langToggle">ğŸ‡¯ğŸ‡µ</div>
  <div class="theme-toggle" id="themeToggle">
    <div class="theme-knob"></div>
  </div>

  <!-- Page wrapper -->
  <div id="page">

    <!-- Navigation -->
    <div id="navContainer"></div>

    <div class="divider"></div>

    <!-- Commission content -->
    <section class="commission-wrap">
      <div class="commission-box" id="commissionBox">
        <h2 id="comTitle">COMMISSIONS</h2>

        <p id="comInfo">Commission information will be added here soon.</p>

        <p class="placeholder" id="comList">
          âœ¦ Prices<br>
          âœ¦ Examples<br>
          âœ¦ Terms of Service<br>
          âœ¦ Queue Status<br><br>
          (Placeholder content â€” coming soon â™¡)
        </p>
      </div>
    </section>

    <div class="divider"></div>

  </div>

  <!-- Shared navigation -->
  <script src="/assets/js/navigation.js"></script>

  <!-- Inline shared features -->
  <script>
    // Language toggle with flags
    let isJapanese = false;
    langToggle.onclick = () => {
      langSwipe.classList.remove("active");
      void langSwipe.offsetWidth;
      langSwipe.classList.add("active");

      setTimeout(() => {
        isJapanese = !isJapanese;

        document.querySelectorAll(".blob-text").forEach(t => {
          t.textContent = isJapanese ? t.dataset.jp : t.dataset.en;
        });

        langToggle.textContent = isJapanese ? "ğŸ‡ºğŸ‡¸" : "ğŸ‡¯ğŸ‡µ";

        // Translate commission text
        document.getElementById("comTitle").textContent = isJapanese ? "ã‚³ãƒŸãƒƒã‚·ãƒ§ãƒ³" : "COMMISSIONS";
        document.getElementById("comInfo").textContent = isJapanese 
          ? "ã‚³ãƒŸãƒƒã‚·ãƒ§ãƒ³æƒ…å ±ã¯è¿‘æ—¥ä¸­ã«è¿½åŠ ã•ã‚Œã¾ã™ã€‚" 
          : "Commission information will be added here soon.";
        document.getElementById("comList").innerHTML = isJapanese 
          ? `âœ¦ æ–™é‡‘<br>âœ¦ ã‚µãƒ³ãƒ—ãƒ«<br>âœ¦ åˆ©ç”¨è¦ç´„<br>âœ¦ å—ä»˜çŠ¶æ³<br><br>ï¼ˆãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ãƒ¼ â€” è¿‘æ—¥å…¬é–‹ â™¡ï¼‰`
          : `âœ¦ Prices<br>âœ¦ Examples<br>âœ¦ Terms of Service<br>âœ¦ Queue Status<br><br>(Placeholder content â€” coming soon â™¡)`;
      }, 180);
    };

    // Theme toggle
    themeToggle.onclick = () => document.body.classList.toggle("dark");

    // Cursor sparkles
    let lastStarTime = 0;
    document.addEventListener("mousemove", (e) => {
      const now = Date.now();
      if (now - lastStarTime < 45) return;
      lastStarTime = now;

      const star = document.createElement("div");
      star.className = "star";
      star.textContent = "âœ¦";
      star.style.setProperty("--drift", Math.random());
      star.style.left = e.clientX + "px";
      star.style.top = e.clientY + "px";

      document.body.appendChild(star);
      setTimeout(() => star.remove(), 2000);
    });

    // Box sparkles (inside commission box)
    const commissionBox = document.getElementById("commissionBox");
    setInterval(() => {
      const star = document.createElement("div");
      star.className = "box-star";
      star.textContent = "âœ¦";
      star.style.left = Math.random() * commissionBox.clientWidth + "px";
      star.style.top = "0px";
      commissionBox.appendChild(star);
      setTimeout(() => star.remove(), 6000);
    }, 700);

    // Form submission + validation (red border + shake + popup)
    document.getElementById("commissionForm")?.addEventListener("submit", function(e) {
      e.preventDefault();

      // Reset previous errors
      const inputs = [name, email, message];
      inputs.forEach(f => f.classList.remove("input-error"));

      let hasError = false;

      if (!name.value.trim()) { name.classList.add("input-error"); hasError = true; }
      if (!email.value.includes("@")) { email.classList.add("input-error"); hasError = true; }
      if (!message.value.trim()) { message.classList.add("input-error"); hasError = true; }

      if (hasError) {
        const errorText = isJapanese ? "ã™ã¹ã¦ã®é …ç›®ã‚’æ­£ã—ãå…¥åŠ›ã—ã¦ãã ã•ã„ â™¡" : "Please fill out all fields correctly â™¡";
        showPopup(errorText);
        return;
      }

      const successText = isJapanese ? "é€ä¿¡ã•ã‚Œã¾ã—ãŸï¼è¿‘æ—¥ä¸­ã«ã”é€£çµ¡ã—ã¾ã™ â™¡â™¡" : "Message sent successfully! You will hear back soon! â™¡â™¡";
      showPopup(successText);

      // Optional: simulate sending (replace with real backend later if needed)
      console.log("Form submitted:", name.value, email.value, message.value);

      this.reset();
    });

    // Popup function (top-right, fades out after 5 seconds)
    function showPopup(text) {
      const popup = document.createElement("div");
      popup.className = "popup";
      popup.textContent = text;
      document.body.appendChild(popup);

      // Fade in
      popup.style.opacity = "0";
      popup.style.transition = "opacity 0.5s ease";
      setTimeout(() => popup.style.opacity = "1", 10);

      // Fade out + remove after 5 seconds
      setTimeout(() => {
        popup.style.opacity = "0";
        setTimeout(() => popup.remove(), 500);
      }, 5000);
    }

    // Send button shake on click
    document.getElementById("sendBtn").addEventListener("click", () => {
      const btn = document.getElementById("sendBtn");
      btn.style.animation = "none";
      void btn.offsetWidth; // trigger reflow
      btn.style.animation = "shake 0.35s";
    });
  </script>

  <!-- Shared tab title animation -->
  <script src="/assets/js/tab-title-animation.js"></script>

</body>
</html>
